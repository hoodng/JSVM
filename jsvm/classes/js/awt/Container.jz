$package("js.awt");$import("js.awt.Component");$import("js.awt.ZOrderManager");js.awt.Container = function (def, Runtime, view) {var CLASS = js.awt.Container, thi$ = CLASS.prototype;if (CLASS.__defined__) {this._init.apply(this, arguments);return;}CLASS.__defined__ = true;var Class = js.lang.Class, Event = js.util.Event, LList = js.util.LinkedList, DOM = J$VM.DOM, System = J$VM.System, MQ = J$VM.MQ;thi$.addComponent = function (comp, constraints) {return this.insertComponent(undefined, comp, constraints);};thi$.insertComponent = function (index, comp, constraints) {var items = this._local.items, len = items.length, cid = comp.id, refComp;if (!isNaN(index) && index >= 0 && index < len) {refComp = this.getComponent(items[index]);} else {index = len;}this[cid] = comp;this.def[cid] = comp.def;this.def.items.push(cid);items = LList.$decorate(items);items.add(index, cid);this._addComp(comp, constraints, refComp);this.zOrderAdjust();return comp;};thi$.getComponent = function (id) {return this[id];};thi$.getAllComponents = function () {var ret = [], comps = this._local.items;for (var i = 0, len = comps.length; i < len; i++) {ret.push(this[comps[i]]);}return ret;};thi$.removeComponent = function (comp) {var id = (comp instanceof js.awt.Element) ? comp.id : comp;if (this[id] === undefined) {return undefined;}this.def.items.remove(id);this._local.items.remove(id);comp = this[id];if (this.layout) {this.layout.removeLayoutComponent(comp);}if (this._local.active === comp) {this._local.active = undefined;}delete this[id];if (comp.removeFrom) {comp.removeFrom(this.view);}delete comp.container;this.zOrderAdjust();return comp;};thi$.activateComponent = function (e) {if (e == undefined) {arguments.callee.__super__.call(this);return;}var id, comp;if (e instanceof Event) {id = arguments[1].id;} else {if (e instanceof js.awt.Element) {id = e.id;} else {id = e;}}comp = this[id];if (comp === undefined) {return;}if (this.isZOrder()) {this.bringCompToFront(comp, 7);}if (this.def.activateman == true) {comp.setActivated(true);this._local.active = comp;(function (compid) {if (compid != id) {this.getComponent(compid).setActivated(false);}}).$forEach(this, this.def.items);}}.$override(this.activateComponent);thi$.getActiveComponent = function () {return this._local.active;};thi$.setLayoutManager = function (layout) {if (layout instanceof js.awt.LayoutManager) {this.layout = layout;}};thi$.layoutComponents = function (force) {if (this.layout.instanceOf(js.awt.LayoutManager)) {this.layout.layoutContainer(this, force);}};thi$.getComponentCount = function () {return this.def.items.length;};thi$.items = function () {return this.def.items;};thi$.items0 = function () {return this._local.items;};thi$.contains = function (c, containSelf) {var id;switch (Class.typeOf(c)) {case "string":id = c;break;case "object":id = c.id;break;case "null":case "undefined":return false;default:return arguments.callee.__super__.call(this, c, containSelf);}return this[id] != undefined;}.$override(this.contains);thi$.removeAll = function (gc) {var comps = this.items0(), id, comp, M = this.def, U = this._local;while (comps && comps.length > 0) {id = comps.shift();comp = this[id];delete this[id];delete M[id];if (gc === true) {delete comp.container;comp.destroy();}}M.items = LList.$decorate([]);if (this.layout) {this.layout.invalidateLayout();}};thi$.getPreferredSize = function (nocache) {var bounds, d;if (nocache === true) {bounds = this.getBounds();d = this.layout.preferredLayoutSize(this, true);return {width:this.isRigidWidth() ? bounds.width : d.width, height:this.isRigidHeight() ? bounds.height : d.height};} else {if (!this.def.prefSize) {bounds = this.getBounds();d = this.layout.preferredLayoutSize(this, true);this.setPreferredSize(this.isRigidWidth() ? bounds.width : d.width, this.isRigidHeight() ? bounds.height : d.height);}return this.def.prefSize;}}.$override(this.getPreferredSize);thi$.getMinimumSize = function (nocache) {return nocache === true ? this.layout.minimumLayoutSize(this, nocache) : arguments.callee.__super__.apply(this, arguments);}.$override(this.getMinimumSize);thi$.getMaximumSize = function (nocache) {return nocache === true ? this.layout.maximumLayoutSize(this, nocache) : arguments.callee.__super__.apply(this, arguments);}.$override(this.getMaximumSize);thi$.repaint = function () {if (arguments.callee.__super__.apply(this, arguments)) {var comps = this.items0(), i, len, comp;for (i = 0, len = comps.length; i < len; i++) {comp = this[comps[i]];comp.repaint();}return true;}return false;}.$override(this.repaint);thi$.isAutoFit = function () {return this.def.autofit === true;};thi$.autoResize = function () {if (!this.isAutoFit()) {return;}var bounds = this.getBounds(), prefer = this.getPreferredSize(true), w = bounds.userW, h = bounds.userH;w = (prefer.width > w) ? prefer.width : w;h = (prefer.height > h) ? prefer.height : h;var container = this.getContainer();if (container) {container.doLayout();} else {this.setSize(w, h);}};thi$.doLayout = function (force) {if (arguments.callee.__super__.apply(this, arguments)) {this.layoutComponents(force);return true;}return false;}.$override(this.doLayout);thi$._addComp = function (comp, constraints, refComp) {constraints = constraints || comp.def.constraints;comp.setContainer(this);if (refComp && comp.insertBefore) {comp.insertBefore(refComp.view, this.view);} else {if (comp.appendTo) {comp.appendTo(this.view);}}if (this.layout) {this.layout.addLayoutComponent(comp, constraints);}};thi$._addComps = function (def) {var comps = def.items, R = this.Runtime(), oriComps = this._local.items;LList.$decorate(def.items);for (var i = 0, len = comps.length; i < len; i++) {var compid = comps[i], compDef = def[compid];if (Class.typeOf(compDef) === "object") {compDef.id = compDef.id || compid;compDef.className = compDef.className || (this.def.className + "_" + compid);var comp = new (Class.forName(compDef.classType))(compDef, R);this[compid] = comp;oriComps.push(compid);this._addComp(comp, compDef.constraints);}}};thi$.destroy = function () {this.removeAll(true);arguments.callee.__super__.apply(this, arguments);}.$override(this.destroy);thi$._init = function (def, Runtime, view) {if (def == undefined) {return;}def.classType = def.classType || "js.awt.Container";def.className = def.className || "jsvm_container";arguments.callee.__super__.apply(this, arguments);def.layout = def.layout || {};def.layout.classType = def.layout.classType || "js.awt.LayoutManager";this.setLayoutManager(new (Class.forName(def.layout.classType))(def.layout));def.activateman = Class.isBoolean(def.activateman) ? def.activateman : false;var oriComps = this._local.items = LList.$decorate([]);var comps = def.items;if (Class.typeOf(comps) === "array") {this._addComps(def);} else {def.items = LList.$decorate([]);}this.zOrderAdjust();}.$override(this._init);this._init.apply(this, arguments);}.$extend(js.awt.Component).$implements(js.awt.ZOrderManager);