$package("js.swt");$import("js.swt.DItem");js.swt.ComboBox = function (def, Runtime) {var CLASS = js.swt.ComboBox, thi$ = CLASS.prototype;if (CLASS.__defined__) {this._init.apply(this, arguments);return;}CLASS.__defined__ = true;var Class = js.lang.Class, Event = js.util.Event, LList = js.util.LinkedList, DOM = J$VM.DOM, System = J$VM.System, MQ = J$VM.MQ, List = Class.forName("js.swt.List"), DDList = Class.forName("js.swt.DropdownList");var dItemContainerDef = {classType:"js.awt.HBox", rigid_w:false, rigid_h:false, layout:{gap:0, align_x:0.5, align_y:0.5}}, btnDropDownDef = {classType:"js.awt.Button", iconImage:"dropdown_new.png", rigid_w:true, rigid_h:false, effect:false}, inputBoxDef = {classType:"js.swt.TextField", css:"border:0px none;", rigid_w:false, rigid_h:false, NUCG:true}, sps = ["position", "top", "left", "font-family", "font-size", "font-style", "font-weight", "text-decoration", "text-align", "font-weight", "color", "background-color", "padding-top", "padding-right", "padding-bottom", "padding-left", "border-top-width", "border-right-width", "border-bottom-width", "border-left-width", "border-top-style", "border-right-style", "border-bottom-style", "border-left-style", "border-top-color", "border-right-color", "border-bottom-style", "border-left-color"], iptSps = ["font-family", "font-size", "font-style", "font-weight", "text-decoration", "text-align", "font-weight", "color", "background-color"];thi$.setSubviewRoot = function (root) {if (this.subview && root) {this.subview.rootLayer(root);} else {this._local.subviewRoot = root;}};thi$.setItemsByModel = function (models) {this._local.itemDefs = undefined;this._local.itemModels = models;_preSelect.call(this);if (this.subview) {_showSubview.call(this, false);this.subview.setItemsByModel(models);}};thi$.addItemsByModel = function (models) {if (!Class.isArray(models) || models.length == 0) {return;}var ms = this._local.itemModels || [];this._local.itemModels = ms.concat(models);_preSelect.call(this);if (this.subview) {_showSubview.call(this, false);this.subview.addItemsByModel(models);}};thi$.setItemsByDef = function (defs) {this._local.itemModels = undefined;this._local.itemDefs = defs;_preSelect.call(this);if (this.subview) {_showSubview.call(this, false);this.subview.setItemsByDef(defs);}};thi$.addItemsByDef = function (defs) {if (!Class.isArray(defs) || defs.length == 0) {return;}var ds = this._local.itemModels || [];this._local.itemDefs = ds.concat(defs);_preSelect.call(this);if (this.subview) {_showSubview.call(this, false);this.subview.addItemsByDef(defs);}};thi$.getItems = function () {return this.subview ? this.subview.getItems() : undefined;};thi$.getItemModels = function () {var ms = this._local.itemModels;if (!ms && this.subview) {ms = this.subview.getItemModels();}return ms;};thi$.getItemDefs = function () {var ds = this._local.itemDefs;if (!ds && this.subview) {ds = this.subview.getItemDefs();}return ds;};thi$.getSelectedValues = function () {return this._local.selectedValues;};var _getSelectedIndexes = function () {var ds = this._local.itemDefs, ms = this._local.itemModels, useDs = false, set;if (Class.isArray(ds) && ds.length > 0) {useDs = true;set = ds;} else {if (Class.isArray(ms) && ms.length > 0) {useDs = false;set = ms;}}var len = set ? set.length : 0, indexes = LList.$decorate([]), m;for (var i = 0; i < len; i++) {m = set[i];m = useDs ? m.model : m;if (m && m.marked === true && !List.isIn(i, indexes)) {indexes.addLast(i);}}return indexes;};thi$.getSelectedIndexes = function () {return this.subview ? this.subview.getSelectedIndexes() : _getSelectedIndexes.call(this);};thi$.getSelectedModel = function () {return this.displayItem.model;};var _unMarkAll = function () {var ds = this._local.itemDefs, ms = this._local.itemModels, useDs = false, set;if (Class.isArray(ds) && ds.length > 0) {useDs = true;set = ds;} else {if (Class.isArray(ms) && ms.length > 0) {useDs = false;set = ms;}}var len = set ? set.length : 0, m;for (var i = 0; i < len; i++) {m = useDs ? set[i].model : set[i];if (m) {m.marked = false;}}};thi$.findItemModels = function (by, values, findAll, distinct) {if (!Class.isString(by) || by.length == 0 || !Class.isArray(values) || values.length == 0) {return undefined;}var ds = this._local.itemDefs, ms = this._local.itemModels, useDs = false, set;if (Class.isArray(ds) && ds.length > 0) {useDs = true;set = ds;} else {if (Class.isArray(ms) && ms.length > 0) {useDs = false;set = ms;} else {return undefined;}}var len = set ? set.length : 0, rst = [], m, v;for (var i = 0; i < len; i++) {m = useDs ? set[i].model : set[i];v = m[by];if (List.isIn(v, values)) {if (findAll !== true) {rst.push(m);break;}if (!distinct || !List.isModelIn(m, rst)) {rst.push(m);}}}return rst;};thi$.setSelectedValues = function (values, callback) {_quitEdit.call(this);if (!values || values.length == 0) {this.unselectAll(callback);return;}if (this.subview) {var cInfo = {values:values, notify:callback};this.subview.setSelectedValues(values, true, cInfo);} else {_unMarkAll.call(this);var models, model;if (!this.multiEnable) {var v = values[0];values = [v];models = this.findItemModels("value", values, false);model = (models && models.length > 0) ? models[0] : undefined;if (!Class.isObject(model)) {model = {dname:v, value:v};} else {model.marked = true;}} else {models = this.findItemModels("value", values, true, false);var len = models ? models.length : 0, dnames = LList.$decorate([]), m, dn;for (var i = 0; i < len; i++) {m = models[i];m.marked = true;dn = m.dname;if (dn !== undefined && dn !== null && !dnames.contains(dn)) {dnames.addLast(dn);}}if (dnames.length > 0) {var dname = _joinTexts.call(this, dnames);model = {dname:dname, value:values};} else {model = CLASS.DEFAULTMODEL;}}if (Class.isObject(model)) {_select.call(this, model);}_setSelectedValues.call(this, values);if (callback === true) {this.onSelectedChanged();}}};thi$.findItemModelsByIndex = function (indexes, distinct) {if (!Class.isArray(indexes) || indexes.length == 0) {return undefined;}var ds = this._local.itemDefs, ms = this._local.itemModels, useDs = false;if (Class.isArray(ds) && ds.length > 0) {useDs = true;} else {if (Class.isArray(ms) && ms.length > 0) {useDs = false;} else {return undefined;}}indexes = indexes.sort(function (a, b) {return a - b;});var len = indexes.length, idx, m, rst = [];for (var i = 0; i < len; i++) {idx = indexes[i];m = useDs ? ds[idx].model : ms[idx];if (m && (!distinct || !List.isModelIn(m, rst))) {rst.push(m);}}return rst;};thi$.setSelectedIndexes = function (indexes, callback) {_quitEdit.call(this);if (!indexes || indexes.length == 0) {this.unselectAll(callback);return;}if (this.subview) {var cInfo = {indexes:indexes, notify:callback};this.subview.setSelectedIndexes(indexes, true, cInfo);} else {_unMarkAll.call(this);var ms, m, dnames, values;if (!this.multiEnable) {indexes = [indexes[0]];ms = this.findItemModelsByIndex(indexes);m = (ms && ms.length) ? ms[0] : undefined;if (m) {m.marked = true;values = [m.value];} else {m = CLASS.DEFAULTMODEL;}} else {dnames = LList.$decorate([]);values = LList.$decorate([]);ms = this.findItemModelsByIndex(indexes);var len = ms ? ms.length : 0, i, d, v;for (i = 0; i < len; i++) {m = ms[i];m.marked = true;d = m.dname;v = m.value;if (d !== undefined && d !== null && !dnames.contains(d)) {dnames.addLast(d);}if (!values.contains(v)) {values.push(v);}}if (dnames.length > 0) {dname = _joinTexts.call(this, dnames);m = {dname:dname, value:values};} else {model = CLASS.DEFAULTMODEL;}}_select.call(this, m);_setSelectedValues.call(this, values);if (callback === true) {this.onSelectedChanged();}}};var _isSelectedChanged = function (model) {var latestModel = this._local.latestModel;if (!(latestModel && model)) {return true;}if (latestModel === model) {return false;}if (((typeof latestModel.value) != (typeof model.value)) || (model.value != latestModel.value)) {return true;}if (model.dname != latestModel.dname) {return true;}if (model.img != latestModel.img) {return true;}return false;};var _filterItemsByModel = function (model) {var ds = this._local.itemDefs, ms = this._local.itemModels, set, useDef = false;if (Class.isArray(ds) && ds.length > 0) {set = ds;useDef = true;} else {if (Class.isArray(ms) && ms.length > 0) {set = ms;useDef = false;} else {return undefined;}}var indexes = [], len = set.length, m;for (var i = 0; i < len; i++) {m = useDef ? set[i].model : set[i];if (List.isSameModel(m, model)) {if (!this.multiEnable && indexes.length == 0) {m.marked = true;indexes.push(i);} else {if (this.multiEnable) {m.marked = true;if (!List.isIn(i, indexes)) {indexes.push(i);}} else {m.marked = false;}}} else {m.marked = false;}}return indexes;};thi$.unselectAll = function (callback) {if (this.subview) {var cInfo = {notify:callback};this.subview.unselectAll(true, cInfo);} else {_unMarkAll.call(this);_select.call(this, {dname:"", value:[]});_setSelectedValues.call(this, []);if (callback === true) {this.onSelectedChanged();}}};thi$.setSelectedByModel = function (model, callback) {if (!model || (typeof model !== "object")) {return;}_quitEdit.call(this);var changed = _isSelectedChanged.call(this, model);if (!changed) {return;}_select.call(this, model);_setSelectedValues.call(this, [model.value]);var indexes = _filterItemsByModel.call(this, model) || [];if (this.subview && indexes.length > 0) {this.subview.setSelectedIndexes(indexes, false);}if (callback === true) {this.onSelectedChanged();}};thi$.setMsgType = function (msgType) {if (Class.isString(msgType) && msgType.length > 0) {this._local.msgType = msgType;}};thi$.getMsgType = function () {return this._local.msgType;};thi$.onSelectedChanged = function (target, eType) {var msgType = this.getMsgType(), values = this.getSelectedValues(), eData = {comboID:this.id, values:values}, evt = new Event(eType || "Selected", eData, target || this);this.notifyPeer(msgType, evt);};thi$.setSearchCritical = function (num) {if (Class.isNumber(num)) {this._local.searchCritical = num;if (this.subview) {this.subview.setSearchCritical(num);}}};thi$.isSearchEnable = function () {return this.subview ? this.subview.searchEnable : false;};thi$.onMoved = function () {arguments.callee.__super__.apply(this, arguments);if (this.subview) {this.subview.invalidateLayout(false);}}.$override(this.onMoved);thi$.onResized = function (fire) {arguments.callee.__super__.apply(this, arguments);if (this.subview) {this.subview.invalidateLayout(false);}}.$override(this.onResized);var _onController = function (e) {this.notifyPeer("js.swt.event.ControllerEvent", e);};thi$.repaint = function () {if (arguments.callee.__super__.apply(this, arguments)) {if (!this._eventAttached) {if (this.def.wholeTrigger === true) {this.attachEvent("click", 0, this, _onDropDown);} else {Event.attachEvent(this.btnDropDown.view, "click", 0, this, _onDropDown);}if (this.def.effect === true) {this.attachEvent("mouseover", 0, this, _onMouseOver);this.attachEvent("mouseout", 0, this, _onMouseOut);}MQ.register("js.swt.event.SelectChangedEvent", this, this.selectedChanged);MQ.register("js.swt.event.ControllerEvent", this, _onController);MQ.register("js.awt.event.LayerEvent", this, _onLayerRemoved);this._eventAttached = true;}return true;}return false;}.$override(this.repaint);thi$.onStateChanged = function (e) {arguments.callee.__super__.apply(this, arguments);this.btnDropDown.setState(this.getState());}.$override(this.onStateChanged);thi$.destroy = function () {this._local.itemDefs = null;this._local.itemModels = null;this._local.selectedValues = null;if (this.displayItem) {delete this.displayItem;}if (this._eventAttached) {if (this.def.wholeTrigger === true) {this.detachEvent("click", 0, this, _onDropDown);} else {Event.detachEvent(this.btnDropDown.view, "click", 0, this, _onDropDown);}if (this.def.effect === true) {this.detachEvent("mouseover", 0, this, _onMouseOver);this.detachEvent("mouseout", 0, this, _onMouseOut);}MQ.cancel("js.swt.event.SelectChangedEvent", this, this.selectedChanged);MQ.cancel("js.swt.event.ControllerEvent", this, _onController);MQ.cancel("js.awt.event.LayerEvent", this, _onLayerRemoved);}if (this.subview) {_showSubview.call(this, false);this.subview.setPMFlag(0);this.subview.detachEvent(List.EVT_READY, 4, this, _onListEvent);this.subview.detachEvent(List.EVT_ACK_ITEMSADDED, 4, this, _onListEvent);this.subview.detachEvent(List.EVT_ACK_ITEMSREMOVED, 4, this, _onListEvent);this.subview.detachEvent(DDList.EVT_SUBMITVALUES, 4, this, _onListSubmit);this.subview.destroy();delete this.subview;}arguments.callee.__super__.apply(this, arguments);}.$override(this.destroy);thi$.setDisplayItemStyles = function (styles) {if (typeof styles !== "object") {return;}this._latestStyles = styles;if (this.displayItem) {this.displayItem.applyStyles(styles);}};var _doEdit = function () {var curV = this._inputView.getValue();this._inputView.detachEvent(js.swt.TextField.EVT_SUBMIT, 4, this, _doEdit);this.dItemContainer.removeComponent(this._inputView);this._inputView.destroy();delete this._inputView;var changed = true;if (Class.isString(this._latestValue) && this._latestValue === curV) {changed = false;}if (!changed) {_select.call(this, this._local.latestModel);return;}var models, model, values;if (!this.multiEnable) {models = this.findItemModels("dname", [curV]);model = (models && models.length > 0) ? models[0] : undefined;if (!model) {model = {dname:curV, value:curV};}values = [model.value];} else {values = _splitText.call(this, curV);model = {dname:curV, value:values};}if (typeof this.rectifyInput == "function") {model = this.rectifyInput(model);}_select.call(this, model);_setSelectedValues.call(this, values);if (this.subview) {this.subview.setSelectedValues(values, false);}this.onSelectedChanged();};var _preIptStyles = function () {var latestStyles = this._latestStyles, styles = {}, sp, v;if (!latestStyles) {return styles;}for (var i = 0, len = iptSps.length; i < len; i++) {sp = iptSps[i];v = latestStyles[sp];if (v != undefined && v != null) {styles[sp] = v;}}return styles;};var _onEdit = function (e) {e.cancelBubble();_showSubview.call(this, false);this._local.latestModel = this.displayItem.model;_removeDisplayItem.call(this);var Clz = Class.forName("js.swt.TextField"), iptStyles = _preIptStyles.call(this), iptDef = {width:this._latestWidth, height:this._latestHeight};iptDef = System.objectCopy(inputBoxDef, iptDef, true);iptDef.css = (iptDef.css || "") + DOM.toCssText(iptStyles);var input = this._inputView = new (Clz)(iptDef, this.Runtime());var m = this._local.latestModel, v = this._latestValue = (Class.isObject(m) ? m.dname || "" : "");input.setValue(v);this.dItemContainer.addComponent(input);this.dItemContainer.doLayout(true);input.attachEvent(Clz.EVT_SUBMIT, 4, this, _doEdit);input.focus(true);};var _removeDisplayItem = function () {if (this.displayItem) {if (!this._latestStyles) {this._latestStyles = this.displayItem.getStyles(sps);}this._latestWidth = this.displayItem.getWidth();this._latestHeight = this.displayItem.getHeight();if (this.editable) {this.displayItem.detachEvent("click", 0, this, _onEdit);}this.dItemContainer.removeComponent(this.displayItem);this.displayItem.destroy();}this.displayItem = null;};var _createDisplayItem = function (model) {var b = (this.def.showTips !== false), cssText = DOM.toCssText(this._latestStyles);dItemDef = {classType:"js.swt.DItem", className:this.__buf__.clear().append(this.def.className).append("_dItem").toString(), css:cssText, showTips:b, rigid_w:false, rigid_h:false, layout:{align_x:0, align_y:0.5}, model:model};var displayItem = this.displayItem = new js.swt.DItem(dItemDef, this.Runtime());var tip = this.def.displayTip;if (b && (typeof tip === "string")) {displayItem.setToolTipText(tip);}if (this.editable) {displayItem.attachEvent("click", 0, this, _onEdit);}this.dItemContainer.addComponent(displayItem);if (displayItem.isDOMElement() && ((!isNaN(this._latestWidth) && this._latestWidth > 0) || (!isNaN(this._latestHeight) && this._latestHeight > 0))) {displayItem.setSize(this._latestWidth, this._latestHeight, 3);}};var _setSelected = function (model) {if (!model) {return;}_removeDisplayItem.call(this);_createDisplayItem.call(this, model);};var _wrapText = function (text, startSymbol, endSymbol) {if (typeof text !== "string") {return null;}var buf = new js.lang.StringBuffer(), symbol;if (typeof startSymbol === "string") {symbol = startSymbol;buf.append(startSymbol);}buf.append(text);if (typeof endSymbol === "string") {symbol = endSymbol;}if (typeof symbol === "string") {buf.append(symbol);}return buf.toString();};var _joinTexts = function (texts) {if (!texts || texts.length == 0) {return "";}var buf = new js.lang.StringBuffer(), text;for (var i = 0, len = texts.length; i < len; i++) {if (i > 0) {buf.append(",");}text = texts[i];text = _wrapText.call(this, text, "\"");buf.append(text);}return buf.toString();};var _splitText = function (text) {if (typeof text !== "string") {return null;}var regExp = /("[^"]+")/g, matches = text.match(regExp);if (!matches || matches.length == 0) {return null;}var len = matches.length, segs = [], seg;for (var i = 0; i < len; i++) {seg = matches[i];seg = seg.replace(/"/g, "");segs[i] = seg;}return segs;};var _setSelectedValues = function (values) {values = Class.isArray(values) ? values : [];this._local.selectedValues = LList.$decorate(values);};var _select = function (model) {this._local.latestModel = model;_setSelected.call(this, model);};thi$.showSubview = function (b) {var rst = false;if (b === true) {rst = true;if (this.subview) {if (this.subview.isShown()) {this.subview.hide("hide", {ignore:true});this._local.expectedOp = 1;this.setHover(false);}_showSubview.call(this, true);} else {_onDropdown.call(this);}} else {if (this.subview) {_showSubview.call(this, false);}}return rst;};var _showSubview = function (b) {if (!this.subview) {return;}this._local.expectedOp = b ? 0 : 1;var isShown = this.subview.isShown();if (isShown == b) {return;}if (b) {var w = DOM.outerWidth(this.view, true);this.subview.setMinimumSize(w);this.subview.showBy(this.view);} else {this.subview.hide();}};var _onDropDown = function (e) {if (e) {e.cancelBubble();}if (this._inputView) {_doEdit.call(this);}this._local.latestModel = this.displayItem ? this.displayItem.model : null;var M = this.def;if (!this.subview) {_createSubview.call(this, M);var tmp = this._local.subviewRoot;if (tmp) {this.subview.rootLayer(tmp);delete this._local.subviewRoot;}}var show = (this._local.expectedOp == 0 ? false : true);_showSubview.call(this, show);};var _onMouseOver = function (e) {if (this.subview && this.subview.isShown()) {return;}this.setHover(true);};var _onMouseOut = function (e) {if (this.subview && this.subview.isShown()) {return;}this.setHover(false);};var _buildSelectedModel = function (cInfo) {var m;if (cInfo && cInfo.values) {var set = cInfo.values, dname, v;if (set.length > 0) {if (this.multiEnable) {dname = _joinTexts.call(this, set);v = set;} else {dname = v = set[0];}m = {dname:dname, value:v};}} else {}return m || {dname:"", value:"", isDefault:true};};thi$.extractSelectedModel = function (event) {var data = event.getData(), models = data.models, cInfo = data.callbackInfo, len = models ? models.length : 0, selectedModel;if (len == 0) {selectedModel = _buildSelectedModel.call(this, cInfo);} else {if (this.multiEnable) {var dnames = LList.$decorate([]), values = LList.$decorate([]), m, dname, v;for (var i = 0; i < len; i++) {m = models[i];dname = m.dname;v = m.value;if (dname !== undefined && dname !== null && !dnames.contains(dname)) {dnames.addLast(dname);}if (v !== undefined && v !== null && !values.contains(v)) {values.push(v);}}dname = _joinTexts.call(this, dnames);selectedModel = {dname:dname, value:values};} else {selectedModel = models[0];}}return selectedModel;};thi$.selectedChanged = function (event) {var data = event.getData(), cInfo = data.callbackInfo, m = this.extractSelectedModel(event), vs;if (!m.value && m.isDefault === true) {vs = [];} else {vs = this.multiEnable ? m.value : [m.value];}this._local.selectedValues = LList.$decorate(vs);_select.call(this, m);if (!this.multiEnable) {_showSubview.call(this, false);}if ((event.getType() === "click") || (cInfo && cInfo.notify === true)) {this.onSelectedChanged(event.getEventTarget(), "ItemMarked");}};var _onListEvent = function (e) {this.fireEvent(e);};var _onListSubmit = function () {_showSubview.call(this, false);};var _createSubview = function (def) {var theDef = def.subview, ds = this._local.itemDefs, ms = this._local.itemModels;if (Class.isArray(ds) && ds.length > 0) {theDef.itemDefs = ds;} else {if (Class.isArray(ms) && ms.length > 0) {theDef.itemModels = ms;}}var subview = this.subview = new DDList(theDef, this.Runtime());subview.setPeerComponent(this);subview.setAdjustPosToFit(false);subview.attachEvent(List.EVT_READY, 4, this, _onListEvent);subview.attachEvent(List.EVT_ACK_ITEMSADDED, 4, this, _onListEvent);subview.attachEvent(List.EVT_ACK_ITEMSREMOVED, 4, this, _onListEvent);subview.attachEvent(DDList.EVT_SUBMITVALUES, 4, this, _onListSubmit);};var _onLayerRemoved = function (e) {var type = e.getType(), evt = e.getData(), eType = evt ? evt.getType() : undefined, el = evt ? evt.srcElement : undefined, trigger = (this.def.wholeTrigger === true ? this : this.btnDropDown);this.notifyPeer("js.awt.event.LayerEvent", e);if (type == "afterRemoveLayer") {if (eType == "hide" && evt && evt.ignore === true) {return;}if (eType == "hide" || (el && !trigger.contains(el, true))) {this._local.expectedOp = 1;this.setHover(false);}}};var _quitEdit = function () {if (!this.editable || !this._inputView) {return;}this._inputView.detachEvent(js.swt.TextField.EVT_SUBMIT, 4, this, _doEdit);this.dItemContainer.removeComponent(this._inputView);this._inputView.destroy();delete this._inputView;_select.call(this, this._local.latestModel);};var _preSelect = function (useDefault) {var ds = this._local.itemDefs, ms = this._local.itemModels, useDs = false, set;if (Class.isArray(ds) && ds.length > 0) {useDs = true;set = ds;} else {if (Class.isArray(ms) && ms.length > 0) {useDs = false;set = ms;}}var len = set ? set.length : 0, dnames = [], values = LList.$decorate([]), tmp, m;for (var i = 0; i < len; i++) {tmp = set[i];tmp = useDs ? tmp.model : tmp;if (tmp && (tmp.marked === true)) {if (!this.multiEnable) {m = tmp;values.push(m.value);break;}dnames.push(tmp.dname);if (!values.contains(tmp.value)) {values.push(tmp.value);}}}if (this.multiEnable && (dnames.length > 0)) {var dname = _joinTexts.call(this, dnames);m = {dname:dname, value:values};}_quitEdit.call(this);if (!Class.isObject(m) && useDefault === true) {m = CLASS.DEFAULTMODEL;values = [];}if (Class.isObject(m)) {_select.call(this, m);_setSelectedValues.call(this, values);}};var _preInit = function (def) {var buf = new js.lang.StringBuffer();if (def && def.subview) {this._local = this._local || {};this._local.subviewRoot = def.subview.root;delete def.subview.root;}def = System.objectCopy(def, CLASS.DEFAULTDEF(), true, true);def.layout = def.layout || {gap:0, align_x:0, align_y:0.5};def.items = ["dItemContainer", "btnDropDown"];def.dItemContainer = System.objectCopy(dItemContainerDef, {className:def.className + "_dItemContainer"}, true);def.btnDropDown = System.objectCopy(btnDropDownDef, {className:def.className + "_dropdown"}, true);buf = undefined;return def;};thi$._init = function (def) {if (typeof def !== "object") {return;}def = _preInit.call(this, def);arguments.callee.__super__.apply(this, arguments);this._local.expectedOp = 1;this._local.msgType = "js.swt.event.SelectedChanged";this.editable = (def.editable === true);this.multiEnable = (def.subview.multiEnable === true);this.setDisplayItemStyles(def.displayItemStyles);var ds = def.subview.itemDefs, ms = def.subview.itemModels;if (Class.isArray(ds) && ds.length > 0) {this._local.itemDefs = ds;} else {if (Class.isArray(ms) && ms.length > 0) {this._local.itemModels = ms;}}_preSelect.call(this, true);if (def.initDDList === true) {_createSubview.call(this, def);}}.$override(this._init);this._init.apply(this, arguments);}.$extend(js.awt.HBox);js.swt.ComboBox.DEFAULTMODEL = {dname:"", value:""};js.swt.ComboBox.DEFAULTDEF = function () {return {classType:"js.swt.ComboBox", className:"jsvm_comboBox", wholeTrigger:false, editable:false, effect:false, showTips:true, displayTip:undefined, initDDList:false, displayItemStyles:undefined, subview:{multiEnable:false, distinct:false, showItemTip:true, hauto:true, vauto:false, searchIfAllowed:false, lazy:false, itemModels:[], itemDefs:[]}};};