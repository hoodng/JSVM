<!DOCTYPE HTML>
<html class="jsvm--full-h">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script id="j$vm" src="../entry/jsvm.jsp" crs="../../jsvm/"
            classpath="lib/jsre-ui.jz;lib/jsre-gks.jz;lib/service.jz;"></script>
</head>
<body class="jsvm--full-h jsvm--noborder jsvm--nomargin jsvm--nopadding jsvm__body" jsvm_entry="demo">
</body>

<style>
.box1 {
position: absolute;
border: 1px solid red;

left: 100px;
top: 100px;

width:200px;
height:200px;
}

.box2 {
position: absolute;
border: 1px solid blue;

left: 20px;
top: 20px;

width: 100px;
height:100px;

}
</style>

<script type="text/javascript">

J$VM.exec("demo",function(entry){

var Class = js.lang.Class, Event = js.util.Event, MQ = J$VM.MQ,
R = this;
    
this.createApp().run(function(){

    this.addComponent(new js.awt.Label(
        {
            id: "label",
            css: "left:10px;top:10px;width:300px;height:20px;",
            text: "---:---"
        }, R));
    
    var box1 = new js.awt.Container(
        {
            id: "box1",
            className: "box1",
            resizable: true,
            className: "box1"
            /*movable: true,
            resizable: true*/
        }, R);


   var box2 = new js.awt.Component(
        {
            id: "box2",
            className: "box2",
            movable: true,
            mover:{br:1, bb:1},
            resizable: true
         }, R);

   box1.addComponent(box2);

   box2.getMovingMsgRecvs = function(){
       return [this.uuid()];
   }.$bind(this);

   var _onMoving = function(e){
       var buf = [], bounds = box2.getBounds();
       buf.push(box2.getX());
       buf.push(":");
       buf.push(box2.getY());
       buf.push("  ");
       buf.push(bounds.offsetX);
       buf.push(":");
       buf.push(bounds.offsetY);
       this.label.setText(buf.join(""));
   };

   MQ.register(box2.getMovingMsgType(), this, _onMoving);

   this.addComponent(box1);

});

});
</script>
</html>
