<!DOCTYPE HTML>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="../../style/default/jsvm.css"/>
    <link rel="stylesheet" type="text/css" href="../../style/default/dashboard.css"/>
    <script id="j$vm" type="text/javascript" src="../../jsvm/jsre.js"></script>
    <script type="text/javascript" src="../../jsvm/lib/../jsre-ui.js"></script>

    <script type="text/javascript" src="../../jsvm/src/js/awt/Drawable.js"></script>
    <script type="text/javascript" src="../../jsvm/src/js/awt/Graphics2D.js"></script>

    <script type="text/javascript" src="../../jsvm/src/js/awt/CanvasRenderer.js"></script>


    <script type="text/javascript" src="../../jsvm/src/js/awt/GraphicShape.js"></script>
    <script type="text/javascript" src="../../jsvm/src/js/awt/GraphicContainer.js"></script>

    <script type="text/javascript" src="../../jsvm/src/js/awt/GraphicGroup.js"></script> 
    <script type="text/javascript" src="../../jsvm/src/js/awt/GraphicLayer.js"></script>

    <script type="text/javascript" src="../../jsvm/src/js/awt/CanvasGroup.js"></script>    
    <script type="text/javascript" src="../../jsvm/src/js/awt/CanvasLayer.js"></script>


    <script type="text/javascript">
        J$VM.exec("Demo",function(System){
            var Class = js.lang.Class, 
            Color = Class.forName("js.awt.Color");
            new Color(0,0,0,0);

            var G = new (Class.forName("js.awt.Graphics2D"))(
                      {
                         id: "MyGraph",
                         width: 400, height:400,
                         css: "border: 1px solid red;",
                         movable: true,
                         resizable: true,
                         miniSize:{width: 10, height:10},
                         angleUnit: "deg"
                      }, this);


            G.appendChild(new (Class.forName("js.awt.CanvasLayer"))({id: "myLayer", capture:true}, this));
            G.getLayer("myLayer").appendChild(new (Class.forName("js.awt.CanvasGroup"))({id: "g1", x:300, y: 0, width: 200, height: 100, capture:true}, this));

            G.drawRect({ id: "rect", width:150, height: 150, strokeStyle:"#0000ff",
                        fillStroke:2, fillLinearGradient:{x0:10, y0:10, x1:210, y1:210, colors:[[0, "#10FF10"],[1,"#100010"]]}, capture:true});

            
            G.drawSector({id:"arc", cx:100, cy:100, r:50, startAngle: 30, endAngle: 180, 
                       fillStroke: 1,
                       strokeStyle: "#00FF00", fillStyle: "#FF0000", capture:true});
            
            var circle = G.drawCircle({id:"circle", cx:200, cy:20, r:10, fillStroke:3,strokeStyle: "#00FF00", fillStyle: "#FF0000", capture:true, layer:"myLayer"});

            var E0 = G.drawEllipse({id:"ellipse0", cx:200, cy:200, rx: 60, ry: 30, capture:true, layer:"myLayer"});
            var E1 = G.drawEllipse({id:"ellipse1", cx:200, cy:200, rx: 30, ry: 60, capture:true, layer:"myLayer"});

            G.drawLine({id:"line-blue", x0:200, y0:0, x1:200, y1:400, strokeStyle:"#0000ff", hitLineWidth: 3, capture:true});
            G.drawLine({id:"line-green", x0:0, y0:200, x1:400, y1:200, strokeStyle:"#00ff00", capture:true});

            G.drawPolyline({id:"polyline", points:[[0,10, 300],[1,200, 250],[1,350, 350]], capture:true, hitLineWidth:3});

            var polygon = G.drawPolygon({id:"polygon", layer:"myLayer",points:[[0,40,320],[1,80, 250],[1,160, 320],[3,160, 360, 120, 360, 40],[1,80, 360]], fillStroke:3, strokeStyle:"red", fillStyle: "rgb(123,34,156)", fillOpacity:0.5, lineWidth:4, capture:true});

              var text0 = G.drawText({id:"text0", text: "Hello world 中文 1234567890", x:0, y:0, width:100, height:40, fontSize:16, fontWeight: "bolder",  rotate: 315, align_y:0.5, align_x:0.0, capture:true});



            G.drawImage({id:"image0", gid:"g1", image:"test.png", x:0, y:0, width:48, height:48, rotate:0, capture:true, layer:"myLayer"});        

            G.drawText({id:"text1", text: "for Row", x:380, y:50, width: 20, height:50, rotate: 90});

            G.drawImage({id:"image1", image:"test.png", x:380, y:100, width: 20, height:20, rotate: 90});

            G.drawText({id:"text2",text: "Drop", fontSize: 16, x:380, y:120, width: 20, height:40, rotate: 90});

            this.addComponent(G);
            //this.doLayout(true);

            var _onMouseEvents = function(e){
                var shape = e.getEventTarget();
		        System.err.println(shape.id+"---"+e.getType()+" "+e._bubble);
		    };

		    circle.attachEvent("mousedown", 4, this, _onMouseEvents);
		    circle.attachEvent("mouseup", 4, this, _onMouseEvents);
		    circle.attachEvent("mouseover", 4, this, _onMouseEvents);                  circle.attachEvent("mouseout", 4, this, _onMouseEvents);
            circle.attachEvent("mousemove", 4, this, _onMouseEvents);
            circle.attachEvent("click", 4, this, _onMouseEvents);
            circle.attachEvent("dblclick", 4, this, _onMouseEvents);

            var count = 0;
            (function(){
                polygon.translate(1.5, -1.5);
                circle.translate(0, 1.5);
                text0.translate(1.5, 1.5);
                text0.setAttr("fillStyle", Color.randomColor().toString("rgba"));
                E0.rotate(10*Math.PI/180, 200, 200);
                E1.rotate(-5*Math.PI/180, 200, 200);
                count ++;
                if(count < 200){
                  G.draw.$delay(G, 10, null, arguments.callee.$bind(this));
                }
            })();
            
        });
    </script>
</head>
<body>

</body>
</html>
